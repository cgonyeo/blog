<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Gonblag</title>
    <meta name="description" content="">
    <meta name="author" content="Derek Gonyeo">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://blog.gonyeo.com/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.no-icons.min.css" rel="stylesheet">
    <link href="http://blog.gonyeo.com/theme/local.css" rel="stylesheet">
    <link href="http://blog.gonyeo.com/theme/pygments.css" rel="stylesheet">
    <link href="http://blog.gonyeo.com/theme/font-awesome.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Gudea:400,400italic|Alegreya+SC' rel='stylesheet' type='text/css'>
</head>

<body>
<header class="blog-header">
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
	<a href="http://blog.gonyeo.com" class="brand">Gonblag</a>
      </div>

      <div class="span3" id="blog-nav">
	<ul class="nav nav-pills pull-right">
            <li><a href="http://blog.gonyeo.com/pages/about-me.html">About Me</a></li>
	    <li >
	      <a href="http://blog.gonyeo.com/category/csh.html ">CSH</a>
	    <li  class="active" >
	      <a href="http://blog.gonyeo.com/category/hfoss.html ">HFOSS</a>
	    <li >
	      <a href="http://blog.gonyeo.com/category/non-technical.html ">Non-Technical</a>
	    <li >
	      <a href="http://blog.gonyeo.com/category/odd.html ">ODD</a>
	</ul>
      </div>
    </div> <!-- End of fluid row-->
  </div>   <!-- End of Container-->
</header>
    
<div class="container">
    <div class="content">
    <div class="row-fluid">

        <div class="span10">
    <div class='article'>
      <div class="row-fluid">
           <div class="content-title span9">
             <h1>Ceti Eel (An IRC bot in Go)</h1b>
           </div>
      </div>
    <div class="row-fluid">
      <div class="span2">
<p>Mon 03 March 2014 </p>

<p style="text-align: left;">
Filed under <a href="http://blog.gonyeo.com/category/hfoss.html">HFOSS</a>
</p>
<p style="text-align: left;">
 
    Tags <a href="http://blog.gonyeo.com/tag/hfoss.html">hfoss</a> </p>
<p>
</p>
      </div>
      
      <div class="span8">
	<p>The Computer Science House runs an IRC server, which is very popular over the
summer when everyone scatters to their various homes and jobs. It serves as a
connection to the social collective we leave behind during the summers, to save
us from having to focus on our actual jobs. It is on this IRC server that a
couple of times last summer some of our more chaotic members decided to enable
an "anarchy mode", wherein everyone on the server was given admin privileges.
Partly to practice my Go, I decided to write a bot to capitalize on this. I
present: <a href="https://github.com/dgonyeo/ceti-eel">ceti eel</a>. (Named after the eels 
used by Khan in Star trek to effectively mind control some guys).</p>
<p>The bot sits in a channel and waits. When it receives admin privileges, or
receives op privileges and there are no admins in channel, it then immediately
de-ops and de-admins everyone else in the channel. If someone is made an op or
admin (probably by Chanserv), the bot will immediately reverse it. The point
being to take control of the channel and hold it. I can then rather have the bot
assign power out to who I choose, or make various demands of the channel.</p>
<p>The demands portion of the bot hasn't been written yet, but I'm imagining
something like forcing everything someone says to include some profane word, or
to require a random member of the channel to profess their love to another
member. The penalty for failing to meet the demands within a certain time limit
can involve a loss of voice, or even kickbanning them.</p>
<p>I used the library <a href="https://github.com/thoj/go-ircevent">go-ircevent</a> to
facilitate the IRC connection side of things, and it was actually pretty easy to
do. I just set up the connection to the server:</p>
<div class="highlight"><pre><span class="nx">con</span> <span class="p">=</span> <span class="nx">irc</span><span class="p">.</span><span class="nx">IRC</span><span class="p">(</span><span class="nx">myNick</span><span class="p">,</span> <span class="nx">myNick</span><span class="p">)</span>
<span class="nx">err</span> <span class="o">:=</span> <span class="nx">con</span><span class="p">.</span><span class="nx">Connect</span><span class="p">(</span><span class="nx">server</span><span class="p">)</span>
</pre></div>


<p>then register callbacks for the events I care about:</p>
<div class="highlight"><pre><span class="nx">con</span><span class="p">.</span><span class="nx">AddCallback</span><span class="p">(</span><span class="s">&quot;001&quot;</span><span class="p">,</span> <span class="nx">connectionMade</span><span class="p">)</span>
<span class="nx">con</span><span class="p">.</span><span class="nx">AddCallback</span><span class="p">(</span><span class="s">&quot;PRIVMSG&quot;</span><span class="p">,</span> <span class="nx">newPrivmsg</span><span class="p">)</span>
<span class="nx">con</span><span class="p">.</span><span class="nx">AddCallback</span><span class="p">(</span><span class="s">&quot;MODE&quot;</span><span class="p">,</span> <span class="nx">modeChanged</span><span class="p">)</span>
<span class="nx">con</span><span class="p">.</span><span class="nx">AddCallback</span><span class="p">(</span><span class="s">&quot;353&quot;</span><span class="p">,</span> <span class="nx">gotNames</span><span class="p">)</span>
</pre></div>


<p>and start the event loop for the server:</p>
<div class="highlight"><pre><span class="nx">con</span><span class="p">.</span><span class="nx">Loop</span><span class="p">()</span>
</pre></div>


<p>From there I join the channel upon successfull connection, listen for things 
being said in the channel, listen for modes being changed, and listen for
answers to my requests for the list of everyone in channel. Going forward, it
should be easy to add functions I can call to generate the commands, and then
have functions to check if conditions have been met that I can call in a
seperate thread that'll sleep for a bit. We'll see how much chaos this can cause
this summer.</p>
	<hr />
      </div>
    </div>
    <div class="span10">
      <h3>Comments</h3>
    
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'gonblag'; 

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>  
    </div>
        </div>
        
        
    </div>     </div> </div>

<!--footer-->
<div class="container">
  <div class="well" style="background-color: #E9EFF6">
    <div id="blog-footer">
      <div class="row-fluid">
	<div class="social span2" align="center" id="socialist">
	  <ul class="nav nav-list">
	    <li class="nav-header">
	      Social
	    </li>
	    <li><a href="https://github.com/dgonyeo"><i class="icon-Github" style="color: #1f334b"></i>Github</a></li>
	    <li><a href="http://www.linkedin.com/pub/derek-gonyeo/41/7a6/412/"><i class="icon-LinkedIn" style="color: #1f334b"></i>LinkedIn</a></li>
            <a href="mailto:dgonyeo@csh.rit.edu"><i class="icon-envelope" style="color: #1f334b" ></i> email</a>

	  </ul>
	</div>
<div class="span8" id="colophon">
  <h2 align="center">Gonblag: Gonyeo's Blog</h2>
  <p align="justify"> Hi! I'm Derek! This is my blag! If you want to contact me to let me know how rad my blag is, there's some links to the left here. I'm also on freenode as dgonyeo in #rit-foss, if IRC is your thing. </p>
</div>
	<div class="site-nav span2" align="center">
          <ul class="nav nav-list" id="site-links">
            <li class="nav-header"> 
              Site
            </li>
            <li><a href="http://blog.gonyeo.com"><i class="icon-home" style="color: #1f334b">
                </i>Home</a></li>
            <li><a href="http://blog.gonyeo.com/archives.html"><i class="icon-list" style="color: #1f334b">
                </i>Archives</a></li>
	    <li><a href="http://blog.gonyeo.com/tags.html"><i class="icon-tags" style="color: #1f334b">
                </i>Tags</a></li>
	    
	    <li> <a href="http://blog.gonyeo.com/feeds/all.rss.xml" rel="alternate">
                <i class="icon-rss" style="color: #1f334b"></i>
                RSS Feed</a></li>
            <li><a href="http://blog.gonyeo.com/" rel="alternate">
                <i class="icon-rss-sign" style="color: #1f334b"></i>
                Atom Feed</a></li>
	  </ul>

        </div>

      </div> <!--end of fluid row-->
    </div> <!--end of blog-footer-->
    <hr />
    <p align="center"><a href="http://blog.gonyeo.com">Gonblag</a>
      &copy; Derek Gonyeo
    Powered by <a href="github.com/getpelican/pelican">Pelican</a> and
        <a href="https://twitter.github.com/bootstrap">Twitter Bootstrap</a>. 
        Icons by <a href="http://fortawesome.github.com/Font-Awesome">Font Awesome</a> and 
        <a href="http://gregoryloucas.github.com/Font-Awesome-More">Font Awesome More</a></p>

  </div> <!--end of well -->
</div> <!--end of container -->

<!--/footer-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>


<script>var _gaq=[['_setAccount','UA-47604400-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>

</body>
</html>